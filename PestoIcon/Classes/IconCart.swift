//
//  IconCart.swift
//  PestoIcon
//
//  Created by jigang.duan on 2018/1/16.
//

import SwiftSVG

struct IconCart: PestoIconProtocol {
    private let rect: CGRect
    private let color: UIColor
    private let size: CGSize
    
    init(frame: CGRect, fillColor: UIColor) {
        self.rect = frame
        self.color = fillColor
        self.size = CGSize(width: 512, height: 512)
    }
    
    var tileImage: UIImage? {
        let drawRect = CGRect(x: 0, y: 0, width: size.width, height: size.height)
        return drawImage(frame: drawRect, fillColor: color) { _, color in
            
            let fillColor = color
            let bezier1Path = UIBezierPath(pathString: IconCart.P1)
            fillColor.setFill()
            bezier1Path.fill()
            
            let bezier2Path = UIBezierPath(pathString: IconCart.P2)
            fillColor.setFill()
            bezier2Path.fill()
            
            let bezier3Path = UIBezierPath(pathString: IconCart.P3)
            fillColor.setFill()
            bezier3Path.fill()
            
            let bezier4Path = UIBezierPath(pathString: IconCart.P4)
            fillColor.setFill()
            bezier4Path.fill()
        }
    }
    
    private static let P1 = "M239.353,379.439c-14.292,0-25.918,11.627-25.918,25.918c0,14.291,11.627,25.918,25.918,25.918c14.291,0,25.918-11.627,25.918-25.918C265.271,391.066,253.644,379.439,239.353,379.439z M239.353,411.275c-3.264,0-5.918-2.655-5.918-5.918c0-3.264,2.655-5.918,5.918-5.918c3.263,0,5.918,2.655,5.918,5.918C245.271,408.621,242.616,411.275,239.353,411.275z"
    
    private static let P2 = "M361.563,379.439c-14.291,0-25.918,11.627-25.918,25.918c0,14.291,11.627,25.918,25.918,25.918c14.292,0,25.919-11.627,25.919-25.918C387.482,391.066,375.855,379.439,361.563,379.439z M361.563,411.275c-3.263,0-5.918-2.655-5.918-5.918c0-3.264,2.655-5.918,5.918-5.918c3.264,0,5.919,2.655,5.919,5.918C367.482,408.621,364.827,411.275,361.563,411.275z"
    
    private static let P3 = "M401.958,350.937h-203c-5.523,0-10,4.477-10,10s4.477,10,10,10h203c5.522,0,10-4.477,10-10S407.48,350.937,401.958,350.937z"
    
    private static let P4 = "M438.277,175.053c-4.165-5.067-16.489-7.759-16.489-7.759c-0.537-0.118-1.427-0.214-1.977-0.213l-248,0.077c-0.55,0-1.444,0.071-1.988,0.157l-1.933-1.095c-0.461-0.299-0.928-0.985-1.036-1.524l-12.114-60.255c-0.108-0.54-3.015-23.715-28.957-23.715H82.631h-3.333c-5.5,0-10,4.5-10,10s4.5,10,10,10h0.042h3.292h43.153c8.192,0,9.241,7.118,9.35,7.657l16.094,80.052c0.108,0.54,0.283,1.422,0.388,1.962c0,0,18.167,93.82,24.264,125.085c0.105,0.54,1.848,23.763,28.905,23.763h185.027c27.332,0,28.193-19.982,28.906-23.763c5.698-30.241,23.811-120.77,23.811-120.77c0.105-0.54,0.184-1.431,0.173-1.98C442.701,192.731,442.442,180.119,438.277,175.053z M182.516,237.616c-0.55,0-1.088-0.441-1.197-0.98l-9.558-47.541c-0.108-0.539-0.143-1.098-0.076-1.24c0,0,0,0,0.083-0.101c0.352-0.428,1.027-0.527,1.027-0.527c0.544-0.08,1.439-0.146,1.989-0.146h32.684c0.55,0,1.089,0.441,1.197,0.98l9.766,48.575c0.108,0.54-0.253,0.98-0.803,0.98H182.516z M234.039,319.245h-29.254c-7.391,0-9.178-7.092-9.284-7.632l-0.889-4.51c-0.106-0.54-0.275-1.424-0.374-1.965l-8.521-46.538c-0.099-0.541,0.27-0.984,0.82-0.984h35.112c0.55,0,1.089,0.441,1.197,0.98l11.996,59.668C234.95,318.804,234.589,319.245,234.039,319.245z M290.437,318.245c0,0.55-0.449,1-1,1h-32.998c-0.55,0-1.088-0.441-1.197-0.98l-11.996-59.668c-0.108-0.54,0.253-0.98,0.803-0.98h45.388c0.551,0,1,0.45,1,1V318.245zM290.437,236.616c0,0.55-0.449,1-1,1h-49.408c-0.55,0-1.089-0.441-1.197-0.98l-9.766-48.575c-0.108-0.539,0.253-0.98,0.803-0.98h59.568c0.551,0,1,0.45,1,1V236.616z M345.643,318.264c-0.108,0.54-0.647,0.98-1.197,0.98h-33.009c-0.55,0-1-0.45-1-1v-59.629c0-0.55,0.45-1,1-1h45.398c0.551,0,0.912,0.441,0.804,0.98L345.643,318.264z M360.856,237.616h-49.42c-0.55,0-1-0.45-1-1V188.08c0-0.55,0.45-1,1-1h59.579c0.55,0,0.911,0.441,0.804,0.98l-9.766,48.575C361.945,237.175,361.406,237.616,360.856,237.616zM399.095,311.613c-0.106,0.54-1.534,7.632-9.283,7.632h-22.966c-0.55,0-0.911-0.441-0.804-0.98l11.996-59.668c0.108-0.54,0.647-0.98,1.197-0.98h29.505c0.55,0,0.913,0.441,0.807,0.981C409.547,258.597,401.708,298.359,399.095,311.613zM423.146,188.864c-0.026,0.549-0.136,1.44-0.242,1.979l-9.027,45.791c-0.106,0.54-0.644,0.981-1.193,0.981h-29.428c-0.55,0-0.911-0.441-0.803-0.98l9.766-48.575c0.108-0.539,0.647-0.98,1.197-0.98h26.396c0.55,0,1.444,0.066,1.989,0.146c0,0,0.675,0.1,1.027,0.527C423.179,188.182,423.146,188.864,423.146,188.864z"
}

extension PestoIcon where Base: UIImageView {
    
    public func cart(fillColor: UIColor = UIColor.gray) {
        base.image = IconCart(frame: base.frame, fillColor: fillColor).tileImage
    }
}
